{% extends "base.html" %}
{% load static %}

{% block title %}Sign Up as Owner | BarberEase{% endblock %}

{% block head %}
<style>
  body {
    background: linear-gradient(120deg, #f3f6fc 60%, #0f172a 100%);
    min-height: 100vh;
  }
  .signup-center {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 75vh;
    margin-top: 30px;
  }
  .signup-card {
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 8px 30px rgba(56,189,248,0.12);
    padding: 40px 38px 32px 38px;
    max-width: 520px;
    margin: 0 auto;
    width: 100%;
  }
  .signup-card h2 {
    font-weight: 800;
    text-align: center;
    margin-bottom: 18px;
    background: linear-gradient(90deg, #0ff, #38bdf8 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .signup-card form input, .signup-card form label {
    margin-bottom: 18px;
    border-radius: 12px;
    border: 1.5px solid #bae6fd;
    padding: 12px 15px;
    font-size: 1.08rem;
    background: #f3f6fc;
    transition: border .16s;
    width: 100%;
    display: block;
  }
  .signup-card form input:focus {
    border-color: #0ff;
    background: #e0f7fa;
    box-shadow: 0 0 8px #38bdf877;
  }
  .signup-card .btn-signup {
    width: 100%;
    padding: 12px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 1.08rem;
    background: linear-gradient(90deg,#0ff,#38bdf8 100%);
    color: #0f172a;
    border: none;
    box-shadow: 0 2px 18px #38bdf822;
    margin-bottom: 8px;
    transition: box-shadow .18s, background .18s;
  }
  .signup-card .btn-signup:hover {
    box-shadow: 0 4px 24px #38bdf8bb;
    background: linear-gradient(90deg,#38bdf8,#0ff);
    color: #222;
  }
  .signup-card .login-link {
    text-align: center;
    margin-top: 16px;
    font-size: 1rem;
  }
  .signup-card .login-link a {
    color: #0ff;
    font-weight: 700;
    text-decoration: underline;
    transition: color .14s;
  }
  .signup-card .login-link a:hover {
    color: #38bdf8;
  }
  .img-preview {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
  }
  .img-preview img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid #bae6fd;
    background: #e0e7ef;
  }
  .form-label {
    font-size: 1rem;
    color: #0e7490;
    margin-bottom: 3px;
    margin-top: 8px;
    display: block;
  }
</style>
{% endblock %}

{% block content %}
<div class="signup-center">
  <div class="signup-card">
    <h2>Shop Owner Sign Up</h2>
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    {% endif %}
    <form action="" method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <input type="text" name="username" placeholder="Username" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password1" placeholder="Password" required>
      <input type="password" name="password2" placeholder="Confirm Password" required>
      <input type="text" name="phone" placeholder="Phone Number" required>
      <input type="text" name="shop_name" placeholder="Shop Name" required>
      <input type="text" name="shop_address" placeholder="Shop Address" required>
      <label class="form-label">Opening Time</label>
      <input type="time" name="opening_time" required>
      <label class="form-label">Closing Time</label>
      <input type="time" name="closing_time" required>
      <label class="form-label">Upload Shop License (Image Only)</label>
      <input type="file" name="license_image" accept="image/*" required>
      <label class="form-label">Upload Shop Images (Multiple, Image Only)</label>
      <input type="file" name="shop_images" accept="image/*" multiple required>
      <button type="submit" class="btn-signup">Sign Up</button>
    </form>
    <div class="login-link">
      Already have an account? <a href="{% url 'login' %}">Login</a>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Optional: Show thumbnails of selected shop images before upload
  document.addEventListener('DOMContentLoaded', function () {
    const shopImagesInput = document.querySelector('input[name="shop_images"]');
    if (shopImagesInput) {
      shopImagesInput.addEventListener('change', function (event) {
        let previewDiv = document.querySelector('.img-preview');
        if (!previewDiv) {
          previewDiv = document.createElement('div');
          previewDiv.className = 'img-preview';
          this.parentNode.insertBefore(previewDiv, this.nextSibling);
        }
        previewDiv.innerHTML = '';
        Array.from(event.target.files).forEach(file => {
          if (file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function (e) {
              const img = document.createElement('img');
              img.src = e.target.result;
              previewDiv.appendChild(img);
            };
            reader.readAsDataURL(file);
          }
        });
      });
    }
  });
</script>
{% endblock %}